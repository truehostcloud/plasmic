// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import CommentPost from "@/wab/client/components/comments/CommentPost";
import CommentPostForm from "@/wab/client/components/comments/CommentPostForm";
import { TplComments } from "@/wab/client/components/comments/utils";
import {
  DefaultThreadCommentsProps,
  PlasmicThreadComments,
} from "@/wab/client/plasmic/plasmic_kit_comments/PlasmicThreadComments";
import { CommentThreadId } from "@/wab/shared/ApiSchema";
import { HTMLElementRefOf } from "@plasmicapp/react-web";
import * as React from "react";

export type ThreadCommentsProps = DefaultThreadCommentsProps & {
  comments: TplComments;
  threadId: CommentThreadId;
};

function ThreadComments_(
  props: ThreadCommentsProps,
  ref: HTMLElementRefOf<"div">
) {
  const { comments, threadId, ...rest } = props;

  return (
    <PlasmicThreadComments
      root={{ ref }}
      {...rest}
      commentsList={{
        children: comments.map((comment) => {
          return <CommentPost key={comment.id} comment={comment} />;
        }),
      }}
      replyForm={{
        render: () => <CommentPostForm threadId={threadId} />,
      }}
    />
  );
}

const ThreadComments = React.forwardRef(ThreadComments_);
export default ThreadComments;
